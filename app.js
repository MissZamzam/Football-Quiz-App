const quizData = [
    {
      subject: "World Cup 2022 ",
      questions: [
        {
          question: "Which club had three players starting in the 2022 World Cup final?",
          options: [
            "Atlético Madrid",
            "PSG",
            "Real Madrid",
            "Tottenham Hotspur",
            ],
          correctOption: "Atlético Madrid",
        },
        {
          question: "In what year did the World Cup competition start?",
          options: [
            "1930",
            "1890 ",
            "1925",
            "1950",
            ],
          correctOption: "1930",
        },
        {
          question: "How many of the five African countries in the tournament were managed by African managers in 2022 Fifa?",
          options: [
            "One",
            "Three",
            "Four",

            "Five",
            ],
          correctOption: "Five",
        },
        {
          question: " Which nation has won the most World Cups?",
          options: [
            "Germany",
            "Italy",
            "Colombia",
            "Brazil",
            ],
          correctOption: "Brazil",
        },
        {
          question: "Who scored the 'Hand of God' goal?",
          options: [
            "JJ Okocha",
            "Kafu",
            "Ronaldinho",
            "Diego Maradona",
            ],
          correctOption: "Diego Maradona",

        },
        {
          question: "Which country hosted the 2022 World Cup?",
          options: [
            "Germany",
            "Qatar",
            "England",
            "Uruguay",
            ],
          correctOption: "Qatar",


        },
        {
          question: "What is the name of the award for best player?",
          options: [
            "Golden Ball",
            "Golden Boot",
            "Ballon D'or",
            "Golden Glove",
            ],
          correctOption: "Golden Ball",

        },
        {
          question: "Which country hosted the World Cup in 2018?",
          options: [
            "Russia",
            "England",
            "Brazil",
            "South Africa",
            ],
          correctOption: "Russia",
        },
        {
          question: "Who is the only football player to have won 3 world cups?",
          options: [
            "Pelé",
            "Zidane ",
            "Maradona",
            "Messi",
            ],
          correctOption: "Pelé",
        },
        {
          question: "Who won the Best Young Player Award in 2018?",
          options: [
            "Kylian Mbappe",
            "Neymar jr",
            "Cristiano Ronaldo",

            "Achraf Hakimi",
            ],
          correctOption: "Kylian Mbappe",
        },
        {
          question: "When was Croatia first allowed to participate as an independent country?",
          options: [
            "1998",
            "1960",
            "1988",
            "2000",
            ],
          correctOption: "1998",
        },
        {
          question: "When was the Golden Ball first awarded?",
          options: [
            "1982",
            "1995",
            "2004",
            "1978",
            ],
          correctOption: "1982",

        },
        {
          question: "Which of the following is not a goalkeeper?",
          options: [
            "Manuel Neuer",
            "Thibaut Courtois",
            "Gianluigi Buffon",
            "Antoine Griezmann",
            ],
          correctOption: "Antoine Griezmann",
        },
        {
          question: "Which of the following countries never hosted the world cup?",
          options: [
            "Russia",
            "Mexico",
            "United States",
            "Australia",
            ],
          correctOption: "Australia",

        },
        {
          question: "Who is the coach of England’s national team for the 2022 World Cup?",
          options: [
            "Gareth Southgate",
            "Graham Arnold",
            "Didier Deschamps",
            "Ryan Giggs",
            ],
          correctOption: "Gareth Southgate",

        },
        {
          question: "Which football player was nicknamed “The Divine Bald One”?",
          options: [
            "Brad Friedel",
            "Bobby Charlton",
            "Fabien Barthez",
            "Thierry Henry",
            ],
          correctOption: "Fabien Barthez",

        },
      ],
    },
    {
      subject: "Players",
      questions: [
        {
          question: "What is Html?",
          options: [
            "Hypertext Markup Language",
            "Hypotext Markup Language",
            "Hypertext Makeup Language",
            "Hypertext Mockup Language",
          ],
          correctOption: "Hypertext Markup Language",
        },
        {
          question: "Javascript is the same as Java",
          options: ["True", "False", "Maybe", "I don't know"],
          correctOption: "False",
        },
        {
          question: "Javascript can only be used for Web development",
          options: ["True", "False", "Maybe", "I don't know"],
          correctOption: "False",
        },

      ],
    },
    {
      subject: "Leagues",
      questions: [
        {
          question: "Which club is nicknamed the toffees?",
          options: [
            "Everton",
            "WEst Ham United",
            "Middlesbrough",
            "Derby County",
          ],
          correctOption: "Everton",
        },
        {
          question: " Which of these teams was not relegated to Division I at the end of the 2001-02 season?",
          options: [
            "Fulham", 
            "Leicester City", 
            "Derby County", 
            "Ipswich Town",
          ],
          correctOption: "Fulham",
        },
        {
          question: " Who was the manager of Bolton Wanderers from 1999 to 2007?",
          options: [
            "Samuel Maritz Bhansali", 
            "Jose Maria Fangio", 
            "Sam Allardyce", 
            "Johnathan Franco" ,       
           ],
          correctOption: "Sam Allardyce",
        },
        {
          question: "1994-95. Manchester United did not win the league, but their home record was impressive. How many goals did they concede in their 21 games at Old Trafford?",
          options: [
            "One", 
            "Four", 
            "Seven", 
            "Eleven"  ,        
            ],
          correctOption: "Four",
        },
        {
          question: "What did Arsenal do in the 2001-02 season that had not been done before in the Premier League?",
          options: [
            "They went unbeaten all season", 
            "They did not lose an away match all season", 
            "They scored 100 goals", 
            "They won the league while also picking up more red cards than any other team",
                      ],
          correctOption: "They did not lose an away match all season",
        },
        {
          question: "Against which club did Alan Shearer score his last Premier League goal in April 2006?",
          options: [
            "Blackburn",
            "Chelsea",
            "Manchester United",
            "Sunderland",
          ],
          correctOption: "Sunderland",
        },
        {
          question: "Who was Roberto Mancini referring to when he said: “We were beaten by a moment of pure genius”?",
          options: [
            "Dimitar Berbatov",
            "Michael Owen",
            "Wayne Rooney",
            "Paul Scholes",        ],
          correctOption: "Wayne Rooney",
        },
        {
          question: "Manchester City pipped Manchester United on goal difference to win their first Premier League title. How many points did both clubs win?",
          options: [
            "84",
            "87",
            "89",
            "92",          ],
          correctOption: "89",
        },
        {
          question: "What was unusual about Alex Ferguson’s last game in charge of Manchester United in May 2013?",
          options: [
            "It was the most goals United had conceded in a game that season",
            "It was the highest scoring draw in Premier League history",
            "A second-half substitute scored a hat-trick",
            "All four of the above",
            "United conceded three goals in the last 10 minutes of a league match for only the second time under Ferguson",      
               ],
          correctOption: "All four of the above",

        },
        {
          question: "Sadio Mané scored the quickest hat-trick in Premier League history. How long did it take him to score three goals for Southampton against Aston Villa?",
          options: [
            "Two minutes and 56 seconds",
            "Four minutes and 11 seconds",
            "Seven minutes and 31 seconds",
            "Nine minutes and 19 seconds",          
            ],
          correctOption: "Two minutes and 56 seconds",
        },
      ],
    },
    {
      subject: "Cups, Trophies & Awards",
      questions: [
        {
          question: "What was the venue of the first ever European Cup?",
          options: [
            "Circumstance",
            "Circummstance",
            "Circcumstance",

            "Circumstanse",
          ],
          correctOption: "Circumstance",
        },
        {
          question: "Which is wrong?",
          options: ["Communicate", "Circumstance", "Counterfeit", "Contantment"],
          correctOption: "Contantment",
        },
        {
          question: "Which is a noun?",
          options: ["Advice", "Advise", "Coming", "feeling"],
          correctOption: "Advice",
        },
        {
          question: "Which is odd?",
          options: ["Country", "City", "Town", "People"],
          correctOption: "People",
        },
        {
          question: "What is odd?",
          options: ["Apple", "Orange", "Green", "Red"],
          correctOption: "Apple",
        },
      ],
    },
  ];

  const subjectsList = document.querySelector(".subjects");
  const subjectsContainer = document.querySelector(".subjects-container");
  const questionsContainer = document.querySelector(".questions-container");
  const questionContainer = document.querySelector(".question");
  const optionsContainer = document.querySelector(".answers");
  const nextBtn = document.querySelector(".next-btn");
  const scoreContainer = document.querySelector(".score");
  const finalScore = document.querySelector(".final-score");
  const resultContainer = document.querySelector(".result-container");
  const result = document.querySelector(".result");
  const restartBtn = document.querySelector(".restart-btn");
  const quitBtns = document.querySelectorAll(".quit-btn");

  // Global Variables
  let subject = "";
  let score = 0;
  let index = 0;
  let acceptingAnswers = true;
  // Sound Effects
  const audio1 = new Audio();
  const audio2 = new Audio();
  const audio3 = new Audio();
  const audio4 = new Audio();
  audio1.src = "error.wav";
  audio2.src = "win.wav";
  audio3.src = "success.mp3";
  audio4.src = "lose.mp3";

  const getSubjects = () => {
    // Get the subjects in the data
    const subjects = quizData
      .map((data) => {
        return `  <li class="subject" id='${data.subject.toLowerCase()}'>
                ${data.subject} <i class="fa-solid fa-chevron-right"></i>
              </li>`;
      })
      .join("");
    subjectsList.innerHTML = subjects;

    // Get all the single subject
    const subjectContainers = document.querySelectorAll(".subject");
    subjectContainers.forEach((container) => {
      container.addEventListener("click", (e) => {
        subject = e.currentTarget.id;
        subjectsContainer.classList.remove("show");
        questionsContainer.classList.add("show");
        getQuestions();
      });
    });
  };

  const getQuestions = () => {
    scoreContainer.innerHTML = `<strong>Score:</strong> ${score}/16`;
    // Find the questions related to the chosen subject
    const subjectQuestions = quizData.find((data) => {
      if (data.subject.toLowerCase() === subject) {
        return data;
      }
      return;
    });
    // Destructure the questions
    let { questions } = subjectQuestions;
    let { question, options, correctOption } = questions[index];
    questionContainer.innerHTML = `<strong>Question:</strong> ${question}`;

    const optionsList = options
      .map((option) => {
        return `<li class="answer">${option}</li>`;
      })
      .join("");
    optionsContainer.innerHTML = optionsList;

    const answersList = document.querySelectorAll(".answer");
    answersList.forEach((answer) => {
      answer.addEventListener("click", (e) => {
        handleClick(e, correctOption);
      });
    });
  };
  // HandleClick Function
  const handleClick = (e, correctOption) => {
    nextBtn.classList.add("show");

    const infoContainer = e.currentTarget;

    if (index == 15) {
      nextBtn.textContent = `Show Result`;
    }

    if (!acceptingAnswers) {
      return;
    }

    acceptingAnswers = false;

    if (infoContainer.textContent === correctOption.toString()) {
      infoContainer.classList.remove("lose");
      infoContainer.classList.add("win");
      score++;
      scoreContainer.innerHTML = `<strong>Score:</strong> ${score}/16`;
      audio2.play();
    } else {
      audio1.play();
      infoContainer.classList.remove("win");
      infoContainer.classList.add("lose");
    }
  };

  nextBtn.addEventListener("click", () => {
    index++;
    nextBtn.classList.remove("show");
    acceptingAnswers = true;

    if (index > 15) {
      index = 15;

      resultContainer.classList.add("show");
      questionsContainer.classList.remove("show");
      finalScore.textContent = score.toString();
      if (score > 2) {
        result.classList.remove("lose");
        result.classList.add("win");
        audio3.play();
      } else {
        audio4.play();
        result.classList.remove("win");
        result.classList.add("lose");
      }
    }
    getQuestions();
  });

  restartBtn.addEventListener("click", () => {
    resultContainer.classList.remove("show");
    questionsContainer.classList.add("show");
    nextBtn.textContent = `Next question`;

    score = 0;
    acceptingAnswers = true;
    index = 0;
    getQuestions();
    audio2.play();
  });

  quitBtns.forEach((btn) => {
    btn.addEventListener("click", () => {
      resultContainer.classList.remove("show");
      subjectsContainer.classList.add("show");
      questionsContainer.classList.remove("show");

      nextBtn.textContent = `Next question`;
      score = 0;
      acceptingAnswers = true;
      index = 0;
      audio1.play();
    });
  });
  getSubjects();